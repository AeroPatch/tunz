<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Notatnik - CloudPatch</title>
  <link rel="icon" type="image/png" href="notatnik.png">
  <style>
    :root {
      --bg: #f3f9ff;
      --primary: #0a2540;
      --secondary: #2d5c8a;
      --white: #ffffff;
      --shadow: 0 8px 20px rgba(0,0,0,0.1);
      --gradient: linear-gradient(to right, #2d5c8a, #0a2540);
      --verify-bg: #dceeff;
    }

    * { box-sizing: border-box; }

    body {
      font-family: "Segoe UI", sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 20px;
      color: var(--primary);
    }

    .container {
      display: flex;
      gap: 20px;
      width: 100%;
      max-width: 1200px;
      align-items: flex-start;
    }

    .left-panel, .right-panel {
      flex: 1;
      background: var(--white);
      border-radius: 15px;
      box-shadow: var(--shadow);
      padding: 15px 20px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 530px;
    }

    h2 { text-align: center; margin: 0 0 10px 0; }

    .field-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .field-row label { font-weight: 600; min-width: 160px; }

    input, textarea, select {
      flex: 1;
      padding: 6px 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 0.95rem;
      font-family: inherit;
    }

    textarea { resize: none; height: 80px; }

    .copy-btn {
      background: var(--gradient);
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.2s;
    }

    .actions { display: flex; gap: 8px; margin-top: 8px; }

    .actions button {
      flex: 1;
      background: var(--gradient);
      color: white;
      border: none;
      padding: 8px;
      border-radius: 8px;
      font-size: 0.95rem;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }

    #summary { 
      flex: 1; 
      height: 200px; 
      padding: 10px; 
      border: 1px solid #ccc; 
      border-radius: 8px; 
      background: #f9f9f9; 
      font-family: monospace; 
      white-space: pre-wrap; 
      font-size: 0.9rem;
      margin-top: 10px;
    }

    .verify-box {
      background: var(--verify-bg);
      border-radius: 8px;
      padding: 10px;
      font-size: 0.9rem;
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-bottom: 10px;
    }

    .verify-box label { font-weight: normal; }

    .footer-container {
      width: 100%;
      text-align: center;
      padding: 15px 10px;
      font-size: 0.9rem;
      color: var(--primary);
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      margin-top: 20px;
    }

    .footer-container a {
      color: var(--secondary);
      font-weight: 600;
      text-decoration: none;
      margin-left: 6px;
      transition: color 0.2s, text-decoration 0.2s;
    }

    .footer-container a:hover { text-decoration: underline; }

    .clickable { color: var(--secondary); text-decoration: underline; cursor: pointer; font-weight: 600; }
    .clickable:hover { text-decoration: none; }
 
  #vip-info {
  display: none;
  color: red;          /* kolor czerwony */
  font-weight: bold;   /* pogrubienie */
  text-align: center;  /* wyśrodkowanie tekstu */
  width: 100%;         /* aby wyśrodkowanie działało */
  margin-top: 10px;    /* opcjonalnie odstęp od góry */
}
   </style>
</head>
<body>

<div class="container">
  <!-- LEWA STRONA -->
  <div class="left-panel">
    <h2>Notatka</h2>

    <div class="field-row" style="flex-direction: column; align-items: flex-start;">
      <div style="display:flex; align-items:center; width:100%; gap:8px;">
        <label>
          <span class="clickable" onclick="copySeries()">Seria</span> i 
          <span class="clickable" onclick="copyNumber()">numer</span> polisy:
        </label>
        <input type="text" id="polisa" oninput="checkVipPolisa()" style="flex:1;">
        <button class="copy-btn" onclick="copyPolisa()">Kopiuj</button>
      </div>
      <div id="vip-info" style="display:none;">To polisa VIP</div>
    </div>

    <div class="field-row">
      <label for="imie">Imię:</label>
      <input id="imie" type="text">
      <button class="copy-btn" onclick="copyToClipboard('imie')">Kopiuj</button>
    </div>

    <div class="field-row">
      <label for="nazwisko">Nazwisko:</label>
      <input id="nazwisko" type="text">
      <button class="copy-btn" onclick="copyToClipboard('nazwisko')">Kopiuj</button>
    </div>

    <div class="field-row">
      <label for="pesel">PESEL:</label>
      <input id="pesel" type="text">
      <button class="copy-btn" onclick="copyToClipboard('pesel')">Kopiuj</button>
    </div>

    <div class="field-row">
      <label for="zgloszenie">Numer zgłoszenia:</label>
      <input id="zgloszenie" type="text">
      <button class="copy-btn" onclick="copyToClipboard('zgloszenie')">Kopiuj</button>
    </div>

    <div class="field-row" style="align-items:flex-start;">
      <label for="notatki">Pozostałe notatki:</label>
      <textarea id="notatki"></textarea>
      <button class="copy-btn" style="height:80px;" onclick="copyToClipboard('notatki')">Kopiuj</button>
    </div>

    <!-- Lista kategorii -->
    <div class="field-row">
      <label for="kategoria">Kategoria telefonu:</label>
      <select id="kategoria" onchange="updateVerification()">
        <option value="kat1">Wartość wykupu/stan konta</option>
        <option value="kat2">Warunki umowy</option>
        <option value="kat3">Potwierdzenie uposażonego</option>
        <option value="kat4">Aktualizacja danych np. tel, email, adres, DO</option>
        <option value="kat5">Saldo polisy</option>
        <option value="kat6">Modyfikacja warunków ubezpieczenia</option>
        <option value="kat7">Wznowienie</option>
        <option value="kat8">Indeksacja/waloryzacja</option>
        <option value="kat9">Cesja</option>
        <option value="kat10">Rozwiązanie</option>
        <option value="kat11">Bezskładkowość</option>
        <option value="kat12">Przesłanie kopii blankietów/korespondencji rocznicowej</option>
        <option value="kat13">Potwierdzenie adresu</option>
        <option value="kat14">Data wysłania korespondencji TUnŻ</option>
        <option value="kat15">Posrednik - obsługujący ubezpieczenie</option>
        <option value="kat16">Regionalny Koordyrator Sprzedaży</option>
        <option value="kat17">Asystent oddziału</option>
        <option value="kat18">OO umowy grupowe w zakładzie pracy</option>
        <option value="kat19">Broker</option>
      </select>
    </div>

    <div class="actions">
      <button onclick="clearFields()">Wyczyść notatkę</button>
      <button onclick="appendToSummary()">Dodaj do notatki zbiorczej</button>
    </div>
  </div>

  <!-- PRAWA STRONA -->
  <div class="right-panel">
    <div id="verify-box" class="verify-box"></div>
    <h2>Zbiorcza notatka</h2>
    <textarea id="summary" readonly></textarea>
  </div>
</div>

<div class="footer-container">
  © 2025 CloudPatch. Wszelkie prawa zastrzeżone.
  <a href="support.html">Wesprzyj projekt</a>
</div>

<script>
  const vipPoliciesBase = [
    "NG0014864","NG0037047","NG0028058","NG0043790","NG0043803",
    "NG0043806","NG0043805","NG0028045","NG0038635","NG0032785",
    "NK0010296","NG0024196","EP0008394","EP0008397","EP0008398",
    "EP0008399","EP0008400","EP0008401","EP0008403","EP0008404",
    "EP0008405","NG0024214","NG0029808","NG0029815","NG0029816",
    "NG0030385","NG0030432","NG0030438","NG0030439","NG0030440",
    "NG0030441","NG0030443","NG0030590","NG0030592"
  ];

  const verificationMap = {
    "kat1": ["Seria i numer polisy*","Imię i nazwisko","PESEL","Dowód osobisty/adres/uposażony"],
    "kat2": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat3": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat4": ["Seria i numer polisy*","Imię i nazwisko","PESEL","Dowód osobisty/adres/uposażony"],
    "kat5": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat6": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat7": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat8": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat9": ["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat10":["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat11":["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat12":["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat13":["Seria i numer polisy*","Imię i nazwisko","PESEL"],
    "kat14":["Seria i numer polisy*","Imię i nazwisko","PESEL"],
        "kat15":["Seria i numer polisy","Imię i nazwisko rozmówcy","PESEL/nr ewidencyjny"],
           "kat16":["Seria i numer polisy","Imię i nazwisko rozmówcy","PESEL/nr ewidencyjny"],
  "kat17":["Seria i numer polisy","Imię i nazwisko rozmówcy","PESEL/nr ewidencyjny"],
    "kat18":["Seria i numer polisy","Imię i nazwisko rozmówcy","PESEL/login AZ", "Imię i nazwisko ubezpieczonego*"],
            
    "kat19":["Seria i numer polisy","Imię i nazwisko rozmówcy","Nr ewidencyjny*"],
  
  };

  function normalizePolisa(input) {
    if (!input) return "";
    const cleaned = input.replace(/\s+/g, '').toUpperCase();
    if (!/^[A-Z]{2}/.test(cleaned)) return cleaned;
    const prefix = cleaned.match(/[A-Z]+/)?.[0] || '';
    const digits = cleaned.match(/\d+/)?.[0] || '';
    return prefix + (digits ? String(parseInt(digits,10)).padStart(7,'0'):'');
  }

  function splitPolisa(input) {
    const formatted = normalizePolisa(input);
    const match = formatted.match(/^([A-Z]+)(\d{7})$/);
    return match ? { series: match[1], number: match[2] } : { series:'', number:'' };
  }

  function copyPolisa() {
    const inputEl = document.getElementById('polisa');
    inputEl.value = normalizePolisa(inputEl.value);
    navigator.clipboard.writeText(inputEl.value);
    checkVipPolisa();
  }

  function copySeries() {
    const inputEl = document.getElementById('polisa');
    const { series } = splitPolisa(inputEl.value);
    if(series) { inputEl.value = normalizePolisa(inputEl.value); navigator.clipboard.writeText(series); checkVipPolisa(); }
  }

  function copyNumber() {
    const inputEl = document.getElementById('polisa');
    const { number } = splitPolisa(inputEl.value);
    if(number) { inputEl.value = normalizePolisa(inputEl.value); navigator.clipboard.writeText(number); checkVipPolisa(); }
  }

  function isVipPolisa(raw) { return vipPoliciesBase.includes(normalizePolisa(raw)); }
  function checkVipPolisa() { const vip=document.getElementById('vip-info'); vip.style.display = isVipPolisa(document.getElementById('polisa').value)?'block':'none'; }
  function copyToClipboard(id) { navigator.clipboard.writeText(document.getElementById(id).value || document.getElementById(id).innerText); }
  function clearFields() { ['polisa','imie','nazwisko','pesel','zgloszenie','notatki'].forEach(id=>document.getElementById(id).value=''); checkVipPolisa(); }

  function appendToSummary() {
    const now = new Date().toLocaleString();
    const polisa = normalizePolisa(document.getElementById('polisa').value);
    const { series, number } = splitPolisa(polisa);
    const kat = document.getElementById('kategoria').value;
    const fields = verificationMap[kat].join(', ');

    const data = `[${now}]
Seria: ${series}
Numer: ${number}
Imię: ${document.getElementById('imie').value}
Nazwisko: ${document.getElementById('nazwisko').value}
PESEL: ${document.getElementById('pesel').value}
Notatki: ${document.getElementById('notatki').value}
--------------------------\n`;

    document.getElementById('summary').value += data;
  }

  function updateVerification() {
    const kat = document.getElementById("kategoria").value;
    const verifyBox = document.getElementById("verify-box");
    verifyBox.innerHTML = "<strong>Weryfikacja danych:</strong>";
    (verificationMap[kat] || ["Seria i numer polisy","Imię i nazwisko","PESEL"]).forEach(f=>{
      const label=document.createElement("label");
      const cb=document.createElement("input");
      cb.type="checkbox";
      cb.value=f;
      label.appendChild(cb);
      label.appendChild(document.createTextNode(" "+f));
      verifyBox.appendChild(label);
    });
  }

  updateVerification(); // inicjalizacja
</script>

</body>
</html>